{"ast":null,"code":"import { useCallback } from 'react';\nvar capturableConsole = console;\nexport function useFrameProcessor(frameProcessor, dependencies) {\n  return useCallback(function (frame) {\n    'worklet';\n    if (global.didSetConsole == null || global.didSetConsole === false) {\n      var _console = {\n        debug: capturableConsole.debug.__callAsync,\n        log: capturableConsole.log.__callAsync,\n        warn: capturableConsole.warn.__callAsync,\n        error: capturableConsole.error.__callAsync,\n        info: capturableConsole.info.__callAsync\n      };\n      _setGlobalConsole(_console);\n      global.didSetConsole = true;\n    }\n    frameProcessor(frame);\n  }, dependencies);\n}","map":{"version":3,"mappings":"AAEA,SAAyBA,WAAzB,QAA4C,OAA5C;AAKA,IAAMC,iBAAiB,GAAGC,OAA1B;AAmBA,OAAO,SAASC,iBAAT,CAA2BC,cAA3B,EAA2DC,YAA3D,EAAyG;EAC9G,OAAOL,WAAW,CAAEM,eAAD,EAAkB;IACnC;IAGA,IAAIC,MAAM,CAACC,aAAP,IAAwB,IAAxB,IAAgCD,MAAM,CAACC,aAAP,KAAyB,KAA7D,EAAoE;MAClE,IAAMN,QAAO,GAAG;QAGdO,KAAK,EAAER,iBAAiB,CAACQ,KAAlB,CAAwBC,WAHjB;QAMdC,GAAG,EAAEV,iBAAiB,CAACU,GAAlB,CAAsBD,WANb;QASdE,IAAI,EAAEX,iBAAiB,CAACW,IAAlB,CAAuBF,WATf;QAYdG,KAAK,EAAEZ,iBAAiB,CAACY,KAAlB,CAAwBH,WAZjB;QAedI,IAAI,EAAEb,iBAAiB,CAACa,IAAlB,CAAuBJ;MAff,CAAhB;MAkBAK,iBAAiB,CAACb,QAAD,CAAjB;MAEAK,MAAM,CAACC,aAAP,GAAuB,IAAvB;IACD;IAEDJ,cAAc,CAACE,KAAD,CAAd;EAED,CA9BiB,EA8BfD,YA9Be,CAAlB;AA+BD","names":["useCallback","capturableConsole","console","useFrameProcessor","frameProcessor","dependencies","frame","global","didSetConsole","debug","__callAsync","log","warn","error","info","_setGlobalConsole"],"sources":["useFrameProcessor.ts"],"sourcesContent":["/* global _setGlobalConsole */\n\nimport { DependencyList, useCallback } from 'react';\nimport type { Frame } from '../Frame';\n\ntype FrameProcessor = (frame: Frame) => void;\n\nconst capturableConsole = console;\n\n/**\n * Returns a memoized Frame Processor function wich you can pass to the `<Camera>`. (See [\"Frame Processors\"](https://mrousavy.github.io/react-native-vision-camera/docs/guides/frame-processors))\n *\n * Make sure to add the `'worklet'` directive to the top of the Frame Processor function, otherwise it will not get compiled into a worklet.\n *\n * @param frameProcessor The Frame Processor\n * @param dependencies The React dependencies which will be copied into the VisionCamera JS-Runtime.\n * @returns The memoized Frame Processor.\n * @example\n * ```ts\n * const frameProcessor = useFrameProcessor((frame) => {\n *   'worklet'\n *   const qrCodes = scanQRCodes(frame)\n *   console.log(`QR Codes: ${qrCodes}`)\n * }, [])\n * ```\n */\nexport function useFrameProcessor(frameProcessor: FrameProcessor, dependencies: DependencyList): FrameProcessor {\n  return useCallback((frame: Frame) => {\n    'worklet';\n\n    // @ts-expect-error\n    if (global.didSetConsole == null || global.didSetConsole === false) {\n      const console = {\n        // @ts-expect-error __callAsync is injected by native REA\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        debug: capturableConsole.debug.__callAsync,\n        // @ts-expect-error __callAsync is injected by native REA\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        log: capturableConsole.log.__callAsync,\n        // @ts-expect-error __callAsync is injected by native REA\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        warn: capturableConsole.warn.__callAsync,\n        // @ts-expect-error __callAsync is injected by native REA\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        error: capturableConsole.error.__callAsync,\n        // @ts-expect-error __callAsync is injected by native REA\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        info: capturableConsole.info.__callAsync,\n      };\n      // @ts-expect-error _setGlobalConsole is set by RuntimeDecorator::decorateRuntime\n      _setGlobalConsole(console);\n      // @ts-expect-error\n      global.didSetConsole = true;\n    }\n\n    frameProcessor(frame);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, dependencies);\n}\n"]},"metadata":{},"sourceType":"module"}